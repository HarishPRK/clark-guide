{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\haris\\\\clark-guide\\\\clark-chatbox\\\\frontend\\\\src\\\\components\\\\ChatWidget.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Box, Fab, Paper, Typography, TextField, IconButton, Chip, CircularProgress } from '@mui/material';\nimport socketService from '../services/socketService';\nimport SendIcon from '@mui/icons-material/Send';\nimport CloseIcon from '@mui/icons-material/Close';\nimport MinimizeIcon from '@mui/icons-material/Minimize';\nimport SchoolIcon from '@mui/icons-material/School';\nimport WorkIcon from '@mui/icons-material/Work';\nimport PersonIcon from '@mui/icons-material/Person';\nimport DateSelector from './DateSelector';\nimport TimeSlotSelector from './TimeSlotSelector';\nimport { useUser } from '../contexts/UserContext';\n\n// URL for Cougar SVG logo\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst cougarLogoUrl = \"https://dxbhsrqyrr690.cloudfront.net/sidearm.nextgen.sites/clarku.sidearmsports.com/images/responsive_2023/CU%20Cougar%20on%20White.svg\";\nconst ChatWidget = () => {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const [isSelectingUserType, setIsSelectingUserType] = useState(true);\n  const [input, setInput] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [connectionError, setConnectionError] = useState(null);\n  const [showDateSelector, setShowDateSelector] = useState(false);\n  const [showTimeSelector, setShowTimeSelector] = useState(false);\n  const [timeSlots, setTimeSlots] = useState([]);\n  const [lastBookingMessage, setLastBookingMessage] = useState(null);\n  const chatBottomRef = useRef(null);\n  const {\n    user,\n    setUserType\n  } = useUser();\n\n  // Clear chat history when page is reloaded\n  useEffect(() => {\n    localStorage.removeItem('sessionId');\n    console.log('Cleared chat session due to page reload');\n  }, []);\n\n  // Scroll to bottom of chat when messages update\n  useEffect(() => {\n    if (chatBottomRef.current) {\n      chatBottomRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  }, [messages]);\n  const toggleChat = () => {\n    setIsAnimating(true);\n    setIsOpen(!isOpen);\n\n    // Reset animation state after animation completes\n    setTimeout(() => {\n      setIsAnimating(false);\n    }, 300);\n  };\n\n  // Connect to socket when user selects type\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.type && !isSelectingUserType) {\n      // Show connecting status\n      setConnectionError(null);\n      setIsLoading(true);\n      let isMounted = true;\n\n      // Attempt to connect with retry logic\n      const connectWithRetry = (retries = 3) => {\n        console.log('Attempting to connect to socket server, retries left:', retries);\n        socketService.connect(user.type).then(() => {\n          if (!isMounted) return;\n          console.log('Socket connection successful');\n          setConnectionError(null);\n\n          // Try to load chat history\n          return socketService.getChatHistory();\n        }).then(history => {\n          if (!isMounted || !history) return;\n          if (history.length > 0) {\n            console.log('Setting chat history:', history);\n            setMessages(history.map(msg => ({\n              id: typeof msg.id === 'string' ? parseInt(msg.id) : msg.id || Date.now(),\n              text: msg.text,\n              sender: msg.sender,\n              timestamp: msg.timestamp instanceof Date ? msg.timestamp : new Date(msg.timestamp),\n              bookingResponse: msg.bookingResponse\n            })));\n          }\n          setIsLoading(false);\n        }).catch(error => {\n          console.error('Connection error:', error);\n          if (!isMounted) return;\n          if (retries > 0) {\n            // Retry connection after delay\n            setTimeout(() => connectWithRetry(retries - 1), 2000);\n          } else {\n            setConnectionError('Could not connect to AI service. Please refresh and try again.');\n            setIsLoading(false);\n          }\n        });\n      };\n\n      // Set up message listener\n      const cleanupListener = socketService.onMessage(message => {\n        if (!isMounted) return;\n        console.log('Processing received message:', message);\n\n        // Create the new message\n        const newMessage = {\n          id: typeof message.id === 'string' ? parseInt(message.id) : message.id || Date.now(),\n          text: message.text,\n          sender: message.sender,\n          timestamp: message.timestamp instanceof Date ? message.timestamp : new Date(message.timestamp),\n          bookingResponse: message.bookingResponse\n        };\n        setMessages(prev => [...prev, newMessage]);\n        setIsLoading(false);\n\n        // Handle booking UI components if needed\n        if (message.bookingResponse) {\n          setLastBookingMessage(newMessage);\n          const bookingResponse = message.bookingResponse;\n\n          // Show date selector if requested\n          if (bookingResponse.showDateSelector) {\n            setShowDateSelector(true);\n            setShowTimeSelector(false);\n          }\n\n          // Show time selector if requested\n          if (bookingResponse.showTimeSelector) {\n            setShowTimeSelector(true);\n            setShowDateSelector(false);\n\n            // Set time slots\n            if (bookingResponse.timeSlots) {\n              setTimeSlots(bookingResponse.timeSlots);\n            }\n          }\n\n          // Hide selectors when not needed\n          if (!bookingResponse.showDateSelector && !bookingResponse.showTimeSelector) {\n            setShowDateSelector(false);\n            setShowTimeSelector(false);\n          }\n        }\n      });\n\n      // Start connection process\n      connectWithRetry();\n\n      // Cleanup function\n      return () => {\n        isMounted = false;\n        cleanupListener();\n        socketService.disconnect();\n      };\n    }\n  }, [user === null || user === void 0 ? void 0 : user.type, isSelectingUserType]);\n  const handleUserSelect = type => {\n    setUserType(type);\n    setIsSelectingUserType(false);\n    setConnectionError(null);\n\n    // Add welcome message - this will be shown immediately while we connect to socket\n    const welcomeMessage = getWelcomeMessage(type);\n    setMessages([{\n      id: Date.now(),\n      text: welcomeMessage,\n      sender: 'ai',\n      timestamp: new Date()\n    }]);\n  };\n  const getWelcomeMessage = type => {\n    switch (type) {\n      case 'student':\n        return 'Welcome to Clark AI! I can help you with course information, campus resources, ClarkYou credentials, OneCard queries, appointment scheduling, study room booking, and more. What can I assist you with today?';\n      case 'faculty':\n        return 'Welcome to Clark AI! I can help you with campus resources, course schedules, study room booking, and other faculty services. How can I assist you today?';\n      case 'other':\n        return 'Welcome to Clark AI! I can provide information about commuter options, places near Clark, study room booking, and general university information. What would you like to know?';\n      default:\n        return 'Welcome to Clark AI! How can I help you today?';\n    }\n  };\n  const handleSendMessage = async (messageText, isComponentGenerated = false) => {\n    const textToSend = messageText || input;\n    if (!textToSend.trim() && !isComponentGenerated) return;\n\n    // Check connection status first\n    if (!socketService.isConnected()) {\n      setConnectionError('Connection to server lost. Attempting to reconnect...');\n      try {\n        // Try to reconnect\n        await socketService.connect((user === null || user === void 0 ? void 0 : user.type) || 'student');\n        // Clear error if successful\n        setConnectionError(null);\n      } catch (error) {\n        console.error('Reconnection failed:', error);\n        setConnectionError('Could not reconnect to AI service. Please refresh the page.');\n        return;\n      }\n    }\n\n    // Add user message to the UI immediately\n    const userMessage = {\n      id: Date.now(),\n      text: textToSend,\n      sender: 'user',\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    if (!isComponentGenerated) {\n      setInput('');\n    }\n    setIsLoading(true);\n    try {\n      // Send message to AI backend\n      await socketService.sendMessage(textToSend);\n\n      // The response will be handled by the socket listener in useEffect\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setIsLoading(false);\n\n      // Show error message with more detail\n      setMessages(prev => [...prev, {\n        id: Date.now(),\n        text: error instanceof Error ? `Sorry, I encountered an error processing your request. ${error.message}` : \"Sorry, I couldn't process your message. Please try again later.\",\n        sender: 'ai',\n        timestamp: new Date()\n      }]);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const handleChipClick = text => {\n    setInput(text);\n  };\n  const resetChat = () => {\n    setIsSelectingUserType(true);\n    setMessages([]);\n    setShowDateSelector(false);\n    setShowTimeSelector(false);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!isOpen && /*#__PURE__*/_jsxDEV(Fab, {\n      color: \"primary\",\n      \"aria-label\": \"chat\",\n      sx: {\n        position: 'fixed',\n        bottom: 24,\n        right: 24,\n        bgcolor: '#FF6B81',\n        zIndex: 9999,\n        '&:hover': {\n          bgcolor: '#FF4757'\n        },\n        padding: '8px'\n      },\n      onClick: toggleChat,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        component: \"img\",\n        src: cougarLogoUrl,\n        alt: \"Clark University Cougar\",\n        sx: {\n          width: '30px',\n          height: '30px',\n          objectFit: 'contain'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 4,\n      sx: {\n        position: 'fixed',\n        bottom: 24,\n        right: 24,\n        width: 400,\n        height: 520,\n        borderRadius: 2,\n        overflow: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n        animation: isAnimating ? 'fadeIn 0.3s ease-in-out' : 'none',\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.15)',\n        zIndex: 9999,\n        '@keyframes fadeIn': {\n          '0%': {\n            opacity: 0,\n            transform: 'translateY(20px) scale(0.9)'\n          },\n          '100%': {\n            opacity: 1,\n            transform: 'translateY(0) scale(1)'\n          }\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          bgcolor: '#FF6B81',\n          color: 'white',\n          p: 1.5,\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            ml: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://www.clarku.edu/wp-content/themes/clarku/assets/img/main-logo.svg\",\n            alt: \"Clark University Logo\",\n            style: {\n              height: '28px',\n              marginRight: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            component: \"div\",\n            sx: {\n              fontFamily: '\"Merriweather\", serif',\n              fontWeight: 700,\n              fontSize: '1rem',\n              letterSpacing: '0.5px'\n            },\n            children: \"AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flexGrow: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"inherit\",\n            size: \"small\",\n            onClick: () => setIsOpen(false),\n            sx: {\n              mr: 0.5\n            },\n            children: /*#__PURE__*/_jsxDEV(MinimizeIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            color: \"inherit\",\n            size: \"small\",\n            onClick: () => {\n              setIsOpen(false);\n              resetChat();\n            },\n            children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }, this), isSelectingUserType ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 3,\n          overflow: 'auto',\n          flexGrow: 1,\n          background: 'linear-gradient(to bottom, #f8f8f8, #ffffff)',\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          component: \"div\",\n          gutterBottom: true,\n          sx: {\n            fontFamily: '\"Merriweather\", serif',\n            fontWeight: 700,\n            color: '#2a2a2a',\n            textAlign: 'center',\n            mb: 3\n          },\n          children: \"Hello\\uD83D\\uDE00 I am ClarkGuide\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: 1.5,\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 2,\n            sx: {\n              p: 1.5,\n              cursor: 'pointer',\n              borderRadius: '12px'\n            },\n            onClick: () => handleUserSelect('student'),\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(SchoolIcon, {\n                sx: {\n                  mr: 2,\n                  color: '#FF6B81'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"subtitle1\",\n                  children: \"Student\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: \"Access course info, campus resources, ClarkYou help, and more\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 2,\n            sx: {\n              p: 1.5,\n              cursor: 'pointer',\n              borderRadius: '12px'\n            },\n            onClick: () => handleUserSelect('faculty'),\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(WorkIcon, {\n                sx: {\n                  mr: 2,\n                  color: '#FF6B81'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"subtitle1\",\n                  children: \"Faculty\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 466,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: \"Campus resources, course schedules, and general support\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 2,\n            sx: {\n              p: 1.5,\n              cursor: 'pointer',\n              borderRadius: '12px'\n            },\n            onClick: () => handleUserSelect('other'),\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(PersonIcon, {\n                sx: {\n                  mr: 2,\n                  color: '#FF6B81'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"subtitle1\",\n                  children: \"Other\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  children: \"Transportation, places near Clark, and general information\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          sx: {\n            display: 'block',\n            textAlign: 'center',\n            mt: 5,\n            color: 'rgba(0,0,0,0.5)',\n            fontStyle: 'italic'\n          },\n          children: \"\\xA9 2025 Clark University Hackathon Project\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            p: 2,\n            overflow: 'auto',\n            flexGrow: 1\n          },\n          children: [connectionError && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              p: 2,\n              mb: 2,\n              bgcolor: '#fff0f0',\n              borderRadius: 2,\n              border: '1px solid #ffcdd2'\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"error\",\n              children: connectionError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 19\n          }, this), messages.map(message => /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: message.sender === 'user' ? 'flex-end' : 'flex-start',\n              mb: 2\n            },\n            children: /*#__PURE__*/_jsxDEV(Paper, {\n              elevation: 1,\n              sx: {\n                p: 1.5,\n                maxWidth: '80%',\n                borderRadius: message.sender === 'user' ? '18px 18px 4px 18px' : '18px 18px 18px 4px',\n                bgcolor: message.sender === 'user' ? '#FF6B81' : '#f5f5f5',\n                color: message.sender === 'user' ? 'white' : 'inherit'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                children: message.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: message.sender === 'user' ? 'rgba(255,255,255,0.7)' : 'text.secondary',\n                sx: {\n                  display: 'block',\n                  mt: 0.5\n                },\n                children: message.timestamp.toLocaleTimeString([], {\n                  hour: '2-digit',\n                  minute: '2-digit'\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 538,\n              columnNumber: 21\n            }, this)\n          }, message.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 19\n          }, this)), showDateSelector && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              my: 2,\n              maxWidth: '100%'\n            },\n            children: /*#__PURE__*/_jsxDEV(DateSelector, {\n              onDateSelected: date => {\n                setShowDateSelector(false);\n                setInput('');\n                const dateStr = date.toLocaleDateString('en-US', {\n                  month: '2-digit',\n                  day: '2-digit',\n                  year: 'numeric'\n                });\n                handleSendMessage(dateStr, true);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 19\n          }, this), showTimeSelector && timeSlots.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              my: 2,\n              maxWidth: '100%'\n            },\n            children: /*#__PURE__*/_jsxDEV(TimeSlotSelector, {\n              timeSlots: timeSlots,\n              onTimeSelected: timeSlot => {\n                setShowTimeSelector(false);\n                setInput('');\n                handleSendMessage(timeSlot.label, true);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: chatBottomRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 17\n          }, this), isLoading && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'flex-start',\n              alignItems: 'center',\n              mb: 2,\n              pl: 2\n            },\n            children: /*#__PURE__*/_jsxDEV(Paper, {\n              elevation: 1,\n              sx: {\n                p: 2,\n                maxWidth: '80%',\n                borderRadius: '18px 18px 18px 4px',\n                bgcolor: '#f5f5f5'\n              },\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n                  size: 16,\n                  sx: {\n                    color: '#FF6B81'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 611,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  sx: {\n                    color: '#666'\n                  },\n                  children: \"Thinking...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 612,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 610,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            p: 2,\n            borderTop: 1,\n            borderColor: 'divider'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              mb: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              size: \"small\",\n              placeholder: \"Type your message...\",\n              value: input,\n              onChange: e => setInput(e.target.value),\n              onKeyPress: handleKeyPress,\n              variant: \"outlined\",\n              sx: {\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              color: \"primary\",\n              onClick: () => handleSendMessage(),\n              disabled: !input.trim(),\n              sx: {\n                bgcolor: '#FF6B81',\n                color: 'white',\n                '&:hover': {\n                  bgcolor: '#FF4757'\n                }\n              },\n              children: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              flexWrap: 'wrap',\n              gap: 0.5\n            },\n            children: [/*#__PURE__*/_jsxDEV(Chip, {\n              label: \"Library hours\",\n              size: \"small\",\n              variant: \"outlined\",\n              onClick: () => handleChipClick('What are the library hours?'),\n              clickable: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 649,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: \"Book a study room\",\n              size: \"small\",\n              variant: \"outlined\",\n              onClick: () => handleChipClick('I want to book a study room'),\n              clickable: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 656,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: \"Courses\",\n              size: \"small\",\n              variant: \"outlined\",\n              onClick: () => handleChipClick('What is my course schedule?'),\n              clickable: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 648,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(ChatWidget, \"Jyffxxm+XExExdh7uYJXdcicwdM=\", false, function () {\n  return [useUser];\n});\n_c = ChatWidget;\nexport default ChatWidget;\nvar _c;\n$RefreshReg$(_c, \"ChatWidget\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Box","Fab","Paper","Typography","TextField","IconButton","Chip","CircularProgress","socketService","SendIcon","CloseIcon","MinimizeIcon","SchoolIcon","WorkIcon","PersonIcon","DateSelector","TimeSlotSelector","useUser","jsxDEV","_jsxDEV","Fragment","_Fragment","cougarLogoUrl","ChatWidget","_s","isOpen","setIsOpen","isSelectingUserType","setIsSelectingUserType","input","setInput","messages","setMessages","isAnimating","setIsAnimating","isLoading","setIsLoading","connectionError","setConnectionError","showDateSelector","setShowDateSelector","showTimeSelector","setShowTimeSelector","timeSlots","setTimeSlots","lastBookingMessage","setLastBookingMessage","chatBottomRef","user","setUserType","localStorage","removeItem","console","log","current","scrollIntoView","behavior","toggleChat","setTimeout","type","isMounted","connectWithRetry","retries","connect","then","getChatHistory","history","length","map","msg","id","parseInt","Date","now","text","sender","timestamp","bookingResponse","catch","error","cleanupListener","onMessage","message","newMessage","prev","disconnect","handleUserSelect","welcomeMessage","getWelcomeMessage","handleSendMessage","messageText","isComponentGenerated","textToSend","trim","isConnected","userMessage","sendMessage","Error","handleKeyPress","e","key","shiftKey","preventDefault","handleChipClick","resetChat","children","color","sx","position","bottom","right","bgcolor","zIndex","padding","onClick","component","src","alt","width","height","objectFit","fileName","_jsxFileName","lineNumber","columnNumber","elevation","borderRadius","overflow","display","flexDirection","animation","boxShadow","opacity","transform","p","justifyContent","alignItems","ml","style","marginRight","variant","fontFamily","fontWeight","fontSize","letterSpacing","flexGrow","size","mr","background","gutterBottom","textAlign","mb","gap","mt","cursor","fontStyle","border","maxWidth","toLocaleTimeString","hour","minute","my","onDateSelected","date","dateStr","toLocaleDateString","month","day","year","onTimeSelected","timeSlot","label","ref","pl","borderTop","borderColor","fullWidth","placeholder","value","onChange","target","onKeyPress","disabled","flexWrap","clickable","_c","$RefreshReg$"],"sources":["C:/Users/haris/clark-guide/clark-chatbox/frontend/src/components/ChatWidget.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { \r\n  Box, \r\n  Fab, \r\n  Paper, \r\n  Typography, \r\n  TextField,\r\n  IconButton,\r\n  Chip,\r\n  CircularProgress\r\n} from '@mui/material';\r\nimport socketService from '../services/socketService';\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport MinimizeIcon from '@mui/icons-material/Minimize';\r\nimport SchoolIcon from '@mui/icons-material/School';\r\nimport WorkIcon from '@mui/icons-material/Work';\r\nimport PersonIcon from '@mui/icons-material/Person';\r\nimport DateSelector from './DateSelector';\r\nimport TimeSlotSelector from './TimeSlotSelector';\r\nimport { BookingResponse, TimeSlot } from '../types/booking';\r\n\r\nimport { useUser, UserType } from '../contexts/UserContext';\r\n\r\n// URL for Cougar SVG logo\r\nconst cougarLogoUrl = \"https://dxbhsrqyrr690.cloudfront.net/sidearm.nextgen.sites/clarku.sidearmsports.com/images/responsive_2023/CU%20Cougar%20on%20White.svg\";\r\n\r\ninterface Message {\r\n  id: number;\r\n  text: string;\r\n  sender: 'user' | 'ai';\r\n  timestamp: Date;\r\n  bookingResponse?: BookingResponse; // Optional booking-related data\r\n}\r\n\r\nconst ChatWidget: React.FC = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isSelectingUserType, setIsSelectingUserType] = useState(true);\r\n  const [input, setInput] = useState('');\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [connectionError, setConnectionError] = useState<string | null>(null);\r\n  const [showDateSelector, setShowDateSelector] = useState<boolean>(false);\r\n  const [showTimeSelector, setShowTimeSelector] = useState<boolean>(false);\r\n  const [timeSlots, setTimeSlots] = useState<TimeSlot[]>([]);\r\n  const [lastBookingMessage, setLastBookingMessage] = useState<Message | null>(null);\r\n  const chatBottomRef = useRef<HTMLDivElement>(null);\r\n  const { user, setUserType } = useUser();\r\n\r\n  // Clear chat history when page is reloaded\r\n  useEffect(() => {\r\n    localStorage.removeItem('sessionId');\r\n    console.log('Cleared chat session due to page reload');\r\n  }, []);\r\n\r\n  // Scroll to bottom of chat when messages update\r\n  useEffect(() => {\r\n    if (chatBottomRef.current) {\r\n      chatBottomRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  }, [messages]);\r\n\r\n  const toggleChat = () => {\r\n    setIsAnimating(true);\r\n    setIsOpen(!isOpen);\r\n    \r\n    // Reset animation state after animation completes\r\n    setTimeout(() => {\r\n      setIsAnimating(false);\r\n    }, 300);\r\n  };\r\n\r\n  // Connect to socket when user selects type\r\n  useEffect(() => {\r\n    if (user?.type && !isSelectingUserType) {\r\n      // Show connecting status\r\n      setConnectionError(null);\r\n      setIsLoading(true);\r\n      \r\n      let isMounted = true;\r\n      \r\n      // Attempt to connect with retry logic\r\n      const connectWithRetry = (retries = 3) => {\r\n        console.log('Attempting to connect to socket server, retries left:', retries);\r\n        \r\n        socketService.connect(user.type!)\r\n          .then(() => {\r\n            if (!isMounted) return;\r\n            \r\n            console.log('Socket connection successful');\r\n            setConnectionError(null);\r\n            \r\n            // Try to load chat history\r\n            return socketService.getChatHistory();\r\n          })\r\n          .then(history => {\r\n            if (!isMounted || !history) return;\r\n            \r\n            if (history.length > 0) {\r\n              console.log('Setting chat history:', history);\r\n              setMessages(history.map(msg => ({\r\n                id: typeof msg.id === 'string' ? parseInt(msg.id) : (msg.id as number || Date.now()),\r\n                text: msg.text,\r\n                sender: msg.sender,\r\n                timestamp: msg.timestamp instanceof Date ? msg.timestamp : new Date(msg.timestamp),\r\n                bookingResponse: (msg as any).bookingResponse\r\n              })));\r\n            }\r\n            setIsLoading(false);\r\n          })\r\n          .catch(error => {\r\n            console.error('Connection error:', error);\r\n            if (!isMounted) return;\r\n            \r\n            if (retries > 0) {\r\n              // Retry connection after delay\r\n              setTimeout(() => connectWithRetry(retries - 1), 2000);\r\n            } else {\r\n              setConnectionError('Could not connect to AI service. Please refresh and try again.');\r\n              setIsLoading(false);\r\n            }\r\n          });\r\n      };\r\n      \r\n      // Set up message listener\r\n      const cleanupListener = socketService.onMessage((message) => {\r\n        if (!isMounted) return;\r\n        \r\n        console.log('Processing received message:', message);\r\n        \r\n        // Create the new message\r\n        const newMessage = {\r\n          id: typeof message.id === 'string' ? parseInt(message.id) : (message.id || Date.now()),\r\n          text: message.text,\r\n          sender: message.sender,\r\n          timestamp: message.timestamp instanceof Date ? message.timestamp : new Date(message.timestamp),\r\n          bookingResponse: (message as any).bookingResponse\r\n        };\r\n        \r\n        setMessages(prev => [...prev, newMessage]);\r\n        setIsLoading(false);\r\n        \r\n        // Handle booking UI components if needed\r\n        if ((message as any).bookingResponse) {\r\n          setLastBookingMessage(newMessage);\r\n          const bookingResponse = (message as any).bookingResponse;\r\n          \r\n          // Show date selector if requested\r\n          if (bookingResponse.showDateSelector) {\r\n            setShowDateSelector(true);\r\n            setShowTimeSelector(false);\r\n          }\r\n          \r\n          // Show time selector if requested\r\n          if (bookingResponse.showTimeSelector) {\r\n            setShowTimeSelector(true);\r\n            setShowDateSelector(false);\r\n            \r\n            // Set time slots\r\n            if (bookingResponse.timeSlots) {\r\n              setTimeSlots(bookingResponse.timeSlots);\r\n            }\r\n          }\r\n          \r\n          // Hide selectors when not needed\r\n          if (!bookingResponse.showDateSelector && !bookingResponse.showTimeSelector) {\r\n            setShowDateSelector(false);\r\n            setShowTimeSelector(false);\r\n          }\r\n        }\r\n      });\r\n      \r\n      // Start connection process\r\n      connectWithRetry();\r\n      \r\n      // Cleanup function\r\n      return () => {\r\n        isMounted = false;\r\n        cleanupListener();\r\n        socketService.disconnect();\r\n      };\r\n    }\r\n  }, [user?.type, isSelectingUserType]);\r\n\r\n  const handleUserSelect = (type: UserType) => {\r\n    setUserType(type);\r\n    setIsSelectingUserType(false);\r\n    setConnectionError(null);\r\n    \r\n    // Add welcome message - this will be shown immediately while we connect to socket\r\n    const welcomeMessage = getWelcomeMessage(type);\r\n    setMessages([\r\n      { \r\n        id: Date.now(), \r\n        text: welcomeMessage, \r\n        sender: 'ai', \r\n        timestamp: new Date() \r\n      }\r\n    ]);\r\n  };\r\n\r\n  const getWelcomeMessage = (type: UserType): string => {\r\n    switch (type) {\r\n      case 'student':\r\n        return 'Welcome to Clark AI! I can help you with course information, campus resources, ClarkYou credentials, OneCard queries, appointment scheduling, study room booking, and more. What can I assist you with today?';\r\n      case 'faculty':\r\n        return 'Welcome to Clark AI! I can help you with campus resources, course schedules, study room booking, and other faculty services. How can I assist you today?';\r\n      case 'other':\r\n        return 'Welcome to Clark AI! I can provide information about commuter options, places near Clark, study room booking, and general university information. What would you like to know?';\r\n      default:\r\n        return 'Welcome to Clark AI! How can I help you today?';\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = async (messageText?: string, isComponentGenerated = false) => {\r\n    const textToSend = messageText || input;\r\n    \r\n    if (!textToSend.trim() && !isComponentGenerated) return;\r\n    \r\n    // Check connection status first\r\n    if (!socketService.isConnected()) {\r\n      setConnectionError('Connection to server lost. Attempting to reconnect...');\r\n      \r\n      try {\r\n        // Try to reconnect\r\n        await socketService.connect(user?.type || 'student');\r\n        // Clear error if successful\r\n        setConnectionError(null);\r\n      } catch (error) {\r\n        console.error('Reconnection failed:', error);\r\n        setConnectionError('Could not reconnect to AI service. Please refresh the page.');\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Add user message to the UI immediately\r\n    const userMessage: Message = {\r\n      id: Date.now(),\r\n      text: textToSend,\r\n      sender: 'user',\r\n      timestamp: new Date()\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    \r\n    if (!isComponentGenerated) {\r\n      setInput('');\r\n    }\r\n    \r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      // Send message to AI backend\r\n      await socketService.sendMessage(textToSend);\r\n      \r\n      // The response will be handled by the socket listener in useEffect\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      setIsLoading(false);\r\n      \r\n      // Show error message with more detail\r\n      setMessages(prev => [...prev, {\r\n        id: Date.now(),\r\n        text: error instanceof Error ? \r\n          `Sorry, I encountered an error processing your request. ${error.message}` : \r\n          \"Sorry, I couldn't process your message. Please try again later.\",\r\n        sender: 'ai',\r\n        timestamp: new Date()\r\n      }]);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const handleChipClick = (text: string) => {\r\n    setInput(text);\r\n  };\r\n\r\n  const resetChat = () => {\r\n    setIsSelectingUserType(true);\r\n    setMessages([]);\r\n    setShowDateSelector(false);\r\n    setShowTimeSelector(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Chat Button */}\r\n      {!isOpen && (\r\n        <Fab\r\n          color=\"primary\"\r\n          aria-label=\"chat\"\r\n          sx={{\r\n            position: 'fixed',\r\n            bottom: 24,\r\n            right: 24,\r\n            bgcolor: '#FF6B81',\r\n            zIndex: 9999,\r\n            '&:hover': {\r\n              bgcolor: '#FF4757',\r\n            },\r\n            padding: '8px',\r\n          }}\r\n          onClick={toggleChat}\r\n        >\r\n          <Box \r\n            component=\"img\" \r\n            src={cougarLogoUrl}\r\n            alt=\"Clark University Cougar\"\r\n            sx={{ \r\n              width: '30px',\r\n              height: '30px',\r\n              objectFit: 'contain',\r\n            }}\r\n          />\r\n        </Fab>\r\n      )}\r\n\r\n      {/* Chat Window */}\r\n      {isOpen && (\r\n        <Paper\r\n          elevation={4}\r\n          sx={{\r\n            position: 'fixed',\r\n            bottom: 24,\r\n            right: 24,\r\n            width: 400,\r\n            height: 520,\r\n            borderRadius: 2,\r\n            overflow: 'hidden',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            animation: isAnimating ? 'fadeIn 0.3s ease-in-out' : 'none',\r\n            boxShadow: '0 8px 32px rgba(0, 0, 0, 0.15)',\r\n            zIndex: 9999,\r\n            '@keyframes fadeIn': {\r\n              '0%': { opacity: 0, transform: 'translateY(20px) scale(0.9)' },\r\n              '100%': { opacity: 1, transform: 'translateY(0) scale(1)' }\r\n            },\r\n          }}\r\n        >\r\n          {/* Chat Header */}\r\n          <Box\r\n            sx={{\r\n              bgcolor: '#FF6B81',\r\n              color: 'white',\r\n              p: 1.5,\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'center',\r\n              boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\r\n              position: 'relative'\r\n            }}\r\n          >\r\n            <Box sx={{ display: 'flex', alignItems: 'center', ml: 1 }}>\r\n              <img \r\n                src=\"https://www.clarku.edu/wp-content/themes/clarku/assets/img/main-logo.svg\" \r\n                alt=\"Clark University Logo\" \r\n                style={{ \r\n                  height: '28px', \r\n                  marginRight: '8px'\r\n                }} \r\n              />\r\n              <Typography \r\n                variant=\"h6\" \r\n                component=\"div\" \r\n                sx={{ \r\n                  fontFamily: '\"Merriweather\", serif',\r\n                  fontWeight: 700,\r\n                  fontSize: '1rem',\r\n                  letterSpacing: '0.5px'\r\n                }}\r\n              >\r\n                AI\r\n              </Typography>\r\n            </Box>\r\n            <Box sx={{ flexGrow: 1 }} />\r\n            \r\n            <Box>\r\n              <IconButton\r\n                color=\"inherit\"\r\n                size=\"small\"\r\n                onClick={() => setIsOpen(false)}\r\n                sx={{ mr: 0.5 }}\r\n              >\r\n                <MinimizeIcon />\r\n              </IconButton>\r\n              <IconButton\r\n                color=\"inherit\"\r\n                size=\"small\"\r\n                onClick={() => {\r\n                  setIsOpen(false);\r\n                  resetChat();\r\n                }}\r\n              >\r\n                <CloseIcon />\r\n              </IconButton>\r\n            </Box>\r\n          </Box>\r\n\r\n          {/* User Type Selection */}\r\n          {isSelectingUserType ? (\r\n            <Box \r\n              sx={{ \r\n                p: 3, \r\n                overflow: 'auto', \r\n                flexGrow: 1,\r\n                background: 'linear-gradient(to bottom, #f8f8f8, #ffffff)',\r\n                position: 'relative'\r\n              }}\r\n            >\r\n              <Typography \r\n                variant=\"h5\" \r\n                component=\"div\" \r\n                gutterBottom\r\n                sx={{ \r\n                  fontFamily: '\"Merriweather\", serif',\r\n                  fontWeight: 700,\r\n                  color: '#2a2a2a',\r\n                  textAlign: 'center',\r\n                  mb: 3\r\n                }}\r\n              >\r\n                Hello😀 I am ClarkGuide💬\r\n              </Typography>\r\n              \r\n              <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1.5, mt: 2 }}>\r\n                <Paper\r\n                  elevation={2}\r\n                  sx={{\r\n                    p: 1.5,\r\n                    cursor: 'pointer',\r\n                    borderRadius: '12px'\r\n                  }}\r\n                  onClick={() => handleUserSelect('student')}\r\n                >\r\n                  <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                    <SchoolIcon sx={{ mr: 2, color: '#FF6B81' }} />\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">Student</Typography>\r\n                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                        Access course info, campus resources, ClarkYou help, and more\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n                </Paper>\r\n                \r\n                <Paper\r\n                  elevation={2}\r\n                  sx={{\r\n                    p: 1.5,\r\n                    cursor: 'pointer',\r\n                    borderRadius: '12px'\r\n                  }}\r\n                  onClick={() => handleUserSelect('faculty')}\r\n                >\r\n                  <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                    <WorkIcon sx={{ mr: 2, color: '#FF6B81' }} />\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">Faculty</Typography>\r\n                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                        Campus resources, course schedules, and general support\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n                </Paper>\r\n                \r\n                <Paper\r\n                  elevation={2}\r\n                  sx={{\r\n                    p: 1.5,\r\n                    cursor: 'pointer',\r\n                    borderRadius: '12px'\r\n                  }}\r\n                  onClick={() => handleUserSelect('other')}\r\n                >\r\n                  <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                    <PersonIcon sx={{ mr: 2, color: '#FF6B81' }} />\r\n                    <Box>\r\n                      <Typography variant=\"subtitle1\">Other</Typography>\r\n                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                        Transportation, places near Clark, and general information\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n                </Paper>\r\n              </Box>\r\n              \r\n              <Typography \r\n                variant=\"caption\" \r\n                sx={{ \r\n                  display: 'block', \r\n                  textAlign: 'center', \r\n                  mt: 5,\r\n                  color: 'rgba(0,0,0,0.5)',\r\n                  fontStyle: 'italic'\r\n                }}\r\n              >\r\n                © 2025 Clark University Hackathon Project\r\n              </Typography>\r\n            </Box>\r\n          ) : (\r\n            <>\r\n              {/* Chat Messages and Interactive Components */}\r\n              <Box sx={{ p: 2, overflow: 'auto', flexGrow: 1 }}>\r\n                {connectionError && (\r\n                  <Box \r\n                    sx={{ \r\n                      p: 2, \r\n                      mb: 2, \r\n                      bgcolor: '#fff0f0', \r\n                      borderRadius: 2,\r\n                      border: '1px solid #ffcdd2' \r\n                    }}\r\n                  >\r\n                    <Typography variant=\"body2\" color=\"error\">\r\n                      {connectionError}\r\n                    </Typography>\r\n                  </Box>\r\n                )}\r\n                \r\n                {/* Messages */}\r\n                {messages.map((message) => (\r\n                  <Box\r\n                    key={message.id}\r\n                    sx={{\r\n                      display: 'flex',\r\n                      justifyContent: message.sender === 'user' ? 'flex-end' : 'flex-start',\r\n                      mb: 2\r\n                    }}\r\n                  >\r\n                    <Paper\r\n                      elevation={1}\r\n                      sx={{\r\n                        p: 1.5,\r\n                        maxWidth: '80%',\r\n                        borderRadius: message.sender === 'user' ? '18px 18px 4px 18px' : '18px 18px 18px 4px',\r\n                        bgcolor: message.sender === 'user' ? '#FF6B81' : '#f5f5f5',\r\n                        color: message.sender === 'user' ? 'white' : 'inherit'\r\n                      }}\r\n                    >\r\n                      <Typography variant=\"body2\">\r\n                        {message.text}\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" color={message.sender === 'user' ? 'rgba(255,255,255,0.7)' : 'text.secondary'} sx={{ display: 'block', mt: 0.5 }}>\r\n                        {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                      </Typography>\r\n                    </Paper>\r\n                  </Box>\r\n                ))}\r\n                \r\n                {/* Date Selector (for booking) */}\r\n                {showDateSelector && (\r\n                  <Box sx={{ my: 2, maxWidth: '100%' }}>\r\n                    <DateSelector onDateSelected={(date) => {\r\n                      setShowDateSelector(false);\r\n                      setInput('');\r\n                      const dateStr = date.toLocaleDateString('en-US', {\r\n                        month: '2-digit', \r\n                        day: '2-digit', \r\n                        year: 'numeric'\r\n                      });\r\n                      handleSendMessage(dateStr, true);\r\n                    }} />\r\n                  </Box>\r\n                )}\r\n                \r\n                {/* Time Slot Selector (for booking) */}\r\n                {showTimeSelector && timeSlots.length > 0 && (\r\n                  <Box sx={{ my: 2, maxWidth: '100%' }}>\r\n                    <TimeSlotSelector \r\n                      timeSlots={timeSlots}\r\n                      onTimeSelected={(timeSlot) => {\r\n                        setShowTimeSelector(false);\r\n                        setInput('');\r\n                        handleSendMessage(timeSlot.label, true);\r\n                      }}\r\n                    />\r\n                  </Box>\r\n                )}\r\n                \r\n                <div ref={chatBottomRef} />\r\n                \r\n                {/* Loading indicator */}\r\n                {isLoading && (\r\n                  <Box\r\n                    sx={{\r\n                      display: 'flex',\r\n                      justifyContent: 'flex-start',\r\n                      alignItems: 'center',\r\n                      mb: 2,\r\n                      pl: 2\r\n                    }}\r\n                  >\r\n                    <Paper\r\n                      elevation={1}\r\n                      sx={{\r\n                        p: 2,\r\n                        maxWidth: '80%',\r\n                        borderRadius: '18px 18px 18px 4px',\r\n                        bgcolor: '#f5f5f5'\r\n                      }}\r\n                    >\r\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                        <CircularProgress size={16} sx={{ color: '#FF6B81' }} />\r\n                        <Typography \r\n                          variant=\"body2\"\r\n                          sx={{ \r\n                            color: '#666'\r\n                          }}\r\n                        >\r\n                          Thinking...\r\n                        </Typography>\r\n                      </Box>\r\n                    </Paper>\r\n                  </Box>\r\n                )}\r\n              </Box>\r\n\r\n              {/* Input Area */}\r\n              <Box sx={{ p: 2, borderTop: 1, borderColor: 'divider' }}>\r\n                <Box sx={{ display: 'flex', mb: 1 }}>\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    placeholder=\"Type your message...\"\r\n                    value={input}\r\n                    onChange={(e) => setInput(e.target.value)}\r\n                    onKeyPress={handleKeyPress}\r\n                    variant=\"outlined\"\r\n                    sx={{ mr: 1 }}\r\n                  />\r\n                  <IconButton\r\n                    color=\"primary\"\r\n                    onClick={() => handleSendMessage()}\r\n                    disabled={!input.trim()}\r\n                    sx={{ bgcolor: '#FF6B81', color: 'white', '&:hover': { bgcolor: '#FF4757' } }}\r\n                  >\r\n                    <SendIcon />\r\n                  </IconButton>\r\n                </Box>\r\n                <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n                  <Chip\r\n                    label=\"Library hours\"\r\n                    size=\"small\"\r\n                    variant=\"outlined\"\r\n                    onClick={() => handleChipClick('What are the library hours?')}\r\n                    clickable\r\n                  />\r\n                  <Chip\r\n                    label=\"Book a study room\"\r\n                    size=\"small\"\r\n                    variant=\"outlined\"\r\n                    onClick={() => handleChipClick('I want to book a study room')}\r\n                    clickable\r\n                  />\r\n                  <Chip\r\n                    label=\"Courses\"\r\n                    size=\"small\"\r\n                    variant=\"outlined\"\r\n                    onClick={() => handleChipClick('What is my course schedule?')}\r\n                    clickable\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </>\r\n          )}\r\n        </Paper>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChatWidget;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SACEC,GAAG,EACHC,GAAG,EACHC,KAAK,EACLC,UAAU,EACVC,SAAS,EACTC,UAAU,EACVC,IAAI,EACJC,gBAAgB,QACX,eAAe;AACtB,OAAOC,aAAa,MAAM,2BAA2B;AACrD,OAAOC,QAAQ,MAAM,0BAA0B;AAC/C,OAAOC,SAAS,MAAM,2BAA2B;AACjD,OAAOC,YAAY,MAAM,8BAA8B;AACvD,OAAOC,UAAU,MAAM,4BAA4B;AACnD,OAAOC,QAAQ,MAAM,0BAA0B;AAC/C,OAAOC,UAAU,MAAM,4BAA4B;AACnD,OAAOC,YAAY,MAAM,gBAAgB;AACzC,OAAOC,gBAAgB,MAAM,oBAAoB;AAGjD,SAASC,OAAO,QAAkB,yBAAyB;;AAE3D;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AACA,MAAMC,aAAa,GAAG,yIAAyI;AAU/J,MAAMC,UAAoB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjC,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAG7B,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAAC8B,mBAAmB,EAAEC,sBAAsB,CAAC,GAAG/B,QAAQ,CAAC,IAAI,CAAC;EACpE,MAAM,CAACgC,KAAK,EAAEC,QAAQ,CAAC,GAAGjC,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACkC,QAAQ,EAAEC,WAAW,CAAC,GAAGnC,QAAQ,CAAY,EAAE,CAAC;EACvD,MAAM,CAACoC,WAAW,EAAEC,cAAc,CAAC,GAAGrC,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACsC,SAAS,EAAEC,YAAY,CAAC,GAAGvC,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACwC,eAAe,EAAEC,kBAAkB,CAAC,GAAGzC,QAAQ,CAAgB,IAAI,CAAC;EAC3E,MAAM,CAAC0C,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG3C,QAAQ,CAAU,KAAK,CAAC;EACxE,MAAM,CAAC4C,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG7C,QAAQ,CAAU,KAAK,CAAC;EACxE,MAAM,CAAC8C,SAAS,EAAEC,YAAY,CAAC,GAAG/C,QAAQ,CAAa,EAAE,CAAC;EAC1D,MAAM,CAACgD,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGjD,QAAQ,CAAiB,IAAI,CAAC;EAClF,MAAMkD,aAAa,GAAGjD,MAAM,CAAiB,IAAI,CAAC;EAClD,MAAM;IAAEkD,IAAI;IAAEC;EAAY,CAAC,GAAGhC,OAAO,CAAC,CAAC;;EAEvC;EACAlB,SAAS,CAAC,MAAM;IACdmD,YAAY,CAACC,UAAU,CAAC,WAAW,CAAC;IACpCC,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;EACxD,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAtD,SAAS,CAAC,MAAM;IACd,IAAIgD,aAAa,CAACO,OAAO,EAAE;MACzBP,aAAa,CAACO,OAAO,CAACC,cAAc,CAAC;QAAEC,QAAQ,EAAE;MAAS,CAAC,CAAC;IAC9D;EACF,CAAC,EAAE,CAACzB,QAAQ,CAAC,CAAC;EAEd,MAAM0B,UAAU,GAAGA,CAAA,KAAM;IACvBvB,cAAc,CAAC,IAAI,CAAC;IACpBR,SAAS,CAAC,CAACD,MAAM,CAAC;;IAElB;IACAiC,UAAU,CAAC,MAAM;MACfxB,cAAc,CAAC,KAAK,CAAC;IACvB,CAAC,EAAE,GAAG,CAAC;EACT,CAAC;;EAED;EACAnC,SAAS,CAAC,MAAM;IACd,IAAIiD,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEW,IAAI,IAAI,CAAChC,mBAAmB,EAAE;MACtC;MACAW,kBAAkB,CAAC,IAAI,CAAC;MACxBF,YAAY,CAAC,IAAI,CAAC;MAElB,IAAIwB,SAAS,GAAG,IAAI;;MAEpB;MACA,MAAMC,gBAAgB,GAAGA,CAACC,OAAO,GAAG,CAAC,KAAK;QACxCV,OAAO,CAACC,GAAG,CAAC,uDAAuD,EAAES,OAAO,CAAC;QAE7EtD,aAAa,CAACuD,OAAO,CAACf,IAAI,CAACW,IAAK,CAAC,CAC9BK,IAAI,CAAC,MAAM;UACV,IAAI,CAACJ,SAAS,EAAE;UAEhBR,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;UAC3Cf,kBAAkB,CAAC,IAAI,CAAC;;UAExB;UACA,OAAO9B,aAAa,CAACyD,cAAc,CAAC,CAAC;QACvC,CAAC,CAAC,CACDD,IAAI,CAACE,OAAO,IAAI;UACf,IAAI,CAACN,SAAS,IAAI,CAACM,OAAO,EAAE;UAE5B,IAAIA,OAAO,CAACC,MAAM,GAAG,CAAC,EAAE;YACtBf,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEa,OAAO,CAAC;YAC7ClC,WAAW,CAACkC,OAAO,CAACE,GAAG,CAACC,GAAG,KAAK;cAC9BC,EAAE,EAAE,OAAOD,GAAG,CAACC,EAAE,KAAK,QAAQ,GAAGC,QAAQ,CAACF,GAAG,CAACC,EAAE,CAAC,GAAID,GAAG,CAACC,EAAE,IAAcE,IAAI,CAACC,GAAG,CAAC,CAAE;cACpFC,IAAI,EAAEL,GAAG,CAACK,IAAI;cACdC,MAAM,EAAEN,GAAG,CAACM,MAAM;cAClBC,SAAS,EAAEP,GAAG,CAACO,SAAS,YAAYJ,IAAI,GAAGH,GAAG,CAACO,SAAS,GAAG,IAAIJ,IAAI,CAACH,GAAG,CAACO,SAAS,CAAC;cAClFC,eAAe,EAAGR,GAAG,CAASQ;YAChC,CAAC,CAAC,CAAC,CAAC;UACN;UACAzC,YAAY,CAAC,KAAK,CAAC;QACrB,CAAC,CAAC,CACD0C,KAAK,CAACC,KAAK,IAAI;UACd3B,OAAO,CAAC2B,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;UACzC,IAAI,CAACnB,SAAS,EAAE;UAEhB,IAAIE,OAAO,GAAG,CAAC,EAAE;YACf;YACAJ,UAAU,CAAC,MAAMG,gBAAgB,CAACC,OAAO,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC;UACvD,CAAC,MAAM;YACLxB,kBAAkB,CAAC,gEAAgE,CAAC;YACpFF,YAAY,CAAC,KAAK,CAAC;UACrB;QACF,CAAC,CAAC;MACN,CAAC;;MAED;MACA,MAAM4C,eAAe,GAAGxE,aAAa,CAACyE,SAAS,CAAEC,OAAO,IAAK;QAC3D,IAAI,CAACtB,SAAS,EAAE;QAEhBR,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAE6B,OAAO,CAAC;;QAEpD;QACA,MAAMC,UAAU,GAAG;UACjBb,EAAE,EAAE,OAAOY,OAAO,CAACZ,EAAE,KAAK,QAAQ,GAAGC,QAAQ,CAACW,OAAO,CAACZ,EAAE,CAAC,GAAIY,OAAO,CAACZ,EAAE,IAAIE,IAAI,CAACC,GAAG,CAAC,CAAE;UACtFC,IAAI,EAAEQ,OAAO,CAACR,IAAI;UAClBC,MAAM,EAAEO,OAAO,CAACP,MAAM;UACtBC,SAAS,EAAEM,OAAO,CAACN,SAAS,YAAYJ,IAAI,GAAGU,OAAO,CAACN,SAAS,GAAG,IAAIJ,IAAI,CAACU,OAAO,CAACN,SAAS,CAAC;UAC9FC,eAAe,EAAGK,OAAO,CAASL;QACpC,CAAC;QAED7C,WAAW,CAACoD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAED,UAAU,CAAC,CAAC;QAC1C/C,YAAY,CAAC,KAAK,CAAC;;QAEnB;QACA,IAAK8C,OAAO,CAASL,eAAe,EAAE;UACpC/B,qBAAqB,CAACqC,UAAU,CAAC;UACjC,MAAMN,eAAe,GAAIK,OAAO,CAASL,eAAe;;UAExD;UACA,IAAIA,eAAe,CAACtC,gBAAgB,EAAE;YACpCC,mBAAmB,CAAC,IAAI,CAAC;YACzBE,mBAAmB,CAAC,KAAK,CAAC;UAC5B;;UAEA;UACA,IAAImC,eAAe,CAACpC,gBAAgB,EAAE;YACpCC,mBAAmB,CAAC,IAAI,CAAC;YACzBF,mBAAmB,CAAC,KAAK,CAAC;;YAE1B;YACA,IAAIqC,eAAe,CAAClC,SAAS,EAAE;cAC7BC,YAAY,CAACiC,eAAe,CAAClC,SAAS,CAAC;YACzC;UACF;;UAEA;UACA,IAAI,CAACkC,eAAe,CAACtC,gBAAgB,IAAI,CAACsC,eAAe,CAACpC,gBAAgB,EAAE;YAC1ED,mBAAmB,CAAC,KAAK,CAAC;YAC1BE,mBAAmB,CAAC,KAAK,CAAC;UAC5B;QACF;MACF,CAAC,CAAC;;MAEF;MACAmB,gBAAgB,CAAC,CAAC;;MAElB;MACA,OAAO,MAAM;QACXD,SAAS,GAAG,KAAK;QACjBoB,eAAe,CAAC,CAAC;QACjBxE,aAAa,CAAC6E,UAAU,CAAC,CAAC;MAC5B,CAAC;IACH;EACF,CAAC,EAAE,CAACrC,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEW,IAAI,EAAEhC,mBAAmB,CAAC,CAAC;EAErC,MAAM2D,gBAAgB,GAAI3B,IAAc,IAAK;IAC3CV,WAAW,CAACU,IAAI,CAAC;IACjB/B,sBAAsB,CAAC,KAAK,CAAC;IAC7BU,kBAAkB,CAAC,IAAI,CAAC;;IAExB;IACA,MAAMiD,cAAc,GAAGC,iBAAiB,CAAC7B,IAAI,CAAC;IAC9C3B,WAAW,CAAC,CACV;MACEsC,EAAE,EAAEE,IAAI,CAACC,GAAG,CAAC,CAAC;MACdC,IAAI,EAAEa,cAAc;MACpBZ,MAAM,EAAE,IAAI;MACZC,SAAS,EAAE,IAAIJ,IAAI,CAAC;IACtB,CAAC,CACF,CAAC;EACJ,CAAC;EAED,MAAMgB,iBAAiB,GAAI7B,IAAc,IAAa;IACpD,QAAQA,IAAI;MACV,KAAK,SAAS;QACZ,OAAO,+MAA+M;MACxN,KAAK,SAAS;QACZ,OAAO,0JAA0J;MACnK,KAAK,OAAO;QACV,OAAO,gLAAgL;MACzL;QACE,OAAO,gDAAgD;IAC3D;EACF,CAAC;EAED,MAAM8B,iBAAiB,GAAG,MAAAA,CAAOC,WAAoB,EAAEC,oBAAoB,GAAG,KAAK,KAAK;IACtF,MAAMC,UAAU,GAAGF,WAAW,IAAI7D,KAAK;IAEvC,IAAI,CAAC+D,UAAU,CAACC,IAAI,CAAC,CAAC,IAAI,CAACF,oBAAoB,EAAE;;IAEjD;IACA,IAAI,CAACnF,aAAa,CAACsF,WAAW,CAAC,CAAC,EAAE;MAChCxD,kBAAkB,CAAC,uDAAuD,CAAC;MAE3E,IAAI;QACF;QACA,MAAM9B,aAAa,CAACuD,OAAO,CAAC,CAAAf,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEW,IAAI,KAAI,SAAS,CAAC;QACpD;QACArB,kBAAkB,CAAC,IAAI,CAAC;MAC1B,CAAC,CAAC,OAAOyC,KAAK,EAAE;QACd3B,OAAO,CAAC2B,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;QAC5CzC,kBAAkB,CAAC,6DAA6D,CAAC;QACjF;MACF;IACF;;IAEA;IACA,MAAMyD,WAAoB,GAAG;MAC3BzB,EAAE,EAAEE,IAAI,CAACC,GAAG,CAAC,CAAC;MACdC,IAAI,EAAEkB,UAAU;MAChBjB,MAAM,EAAE,MAAM;MACdC,SAAS,EAAE,IAAIJ,IAAI,CAAC;IACtB,CAAC;IAEDxC,WAAW,CAACoD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEW,WAAW,CAAC,CAAC;IAE3C,IAAI,CAACJ,oBAAoB,EAAE;MACzB7D,QAAQ,CAAC,EAAE,CAAC;IACd;IAEAM,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF;MACA,MAAM5B,aAAa,CAACwF,WAAW,CAACJ,UAAU,CAAC;;MAE3C;IACF,CAAC,CAAC,OAAOb,KAAK,EAAE;MACd3B,OAAO,CAAC2B,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9C3C,YAAY,CAAC,KAAK,CAAC;;MAEnB;MACAJ,WAAW,CAACoD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAC5Bd,EAAE,EAAEE,IAAI,CAACC,GAAG,CAAC,CAAC;QACdC,IAAI,EAAEK,KAAK,YAAYkB,KAAK,GAC1B,0DAA0DlB,KAAK,CAACG,OAAO,EAAE,GACzE,iEAAiE;QACnEP,MAAM,EAAE,IAAI;QACZC,SAAS,EAAE,IAAIJ,IAAI,CAAC;MACtB,CAAC,CAAC,CAAC;IACL;EACF,CAAC;EAED,MAAM0B,cAAc,GAAIC,CAAsB,IAAK;IACjD,IAAIA,CAAC,CAACC,GAAG,KAAK,OAAO,IAAI,CAACD,CAAC,CAACE,QAAQ,EAAE;MACpCF,CAAC,CAACG,cAAc,CAAC,CAAC;MAClBb,iBAAiB,CAAC,CAAC;IACrB;EACF,CAAC;EAED,MAAMc,eAAe,GAAI7B,IAAY,IAAK;IACxC5C,QAAQ,CAAC4C,IAAI,CAAC;EAChB,CAAC;EAED,MAAM8B,SAAS,GAAGA,CAAA,KAAM;IACtB5E,sBAAsB,CAAC,IAAI,CAAC;IAC5BI,WAAW,CAAC,EAAE,CAAC;IACfQ,mBAAmB,CAAC,KAAK,CAAC;IAC1BE,mBAAmB,CAAC,KAAK,CAAC;EAC5B,CAAC;EAED,oBACEvB,OAAA,CAAAE,SAAA;IAAAoF,QAAA,GAEG,CAAChF,MAAM,iBACNN,OAAA,CAAClB,GAAG;MACFyG,KAAK,EAAC,SAAS;MACf,cAAW,MAAM;MACjBC,EAAE,EAAE;QACFC,QAAQ,EAAE,OAAO;QACjBC,MAAM,EAAE,EAAE;QACVC,KAAK,EAAE,EAAE;QACTC,OAAO,EAAE,SAAS;QAClBC,MAAM,EAAE,IAAI;QACZ,SAAS,EAAE;UACTD,OAAO,EAAE;QACX,CAAC;QACDE,OAAO,EAAE;MACX,CAAE;MACFC,OAAO,EAAEzD,UAAW;MAAAgD,QAAA,eAEpBtF,OAAA,CAACnB,GAAG;QACFmH,SAAS,EAAC,KAAK;QACfC,GAAG,EAAE9F,aAAc;QACnB+F,GAAG,EAAC,yBAAyB;QAC7BV,EAAE,EAAE;UACFW,KAAK,EAAE,MAAM;UACbC,MAAM,EAAE,MAAM;UACdC,SAAS,EAAE;QACb;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CACN,EAGAnG,MAAM,iBACLN,OAAA,CAACjB,KAAK;MACJ2H,SAAS,EAAE,CAAE;MACblB,EAAE,EAAE;QACFC,QAAQ,EAAE,OAAO;QACjBC,MAAM,EAAE,EAAE;QACVC,KAAK,EAAE,EAAE;QACTQ,KAAK,EAAE,GAAG;QACVC,MAAM,EAAE,GAAG;QACXO,YAAY,EAAE,CAAC;QACfC,QAAQ,EAAE,QAAQ;QAClBC,OAAO,EAAE,MAAM;QACfC,aAAa,EAAE,QAAQ;QACvBC,SAAS,EAAEjG,WAAW,GAAG,yBAAyB,GAAG,MAAM;QAC3DkG,SAAS,EAAE,gCAAgC;QAC3CnB,MAAM,EAAE,IAAI;QACZ,mBAAmB,EAAE;UACnB,IAAI,EAAE;YAAEoB,OAAO,EAAE,CAAC;YAAEC,SAAS,EAAE;UAA8B,CAAC;UAC9D,MAAM,EAAE;YAAED,OAAO,EAAE,CAAC;YAAEC,SAAS,EAAE;UAAyB;QAC5D;MACF,CAAE;MAAA5B,QAAA,gBAGFtF,OAAA,CAACnB,GAAG;QACF2G,EAAE,EAAE;UACFI,OAAO,EAAE,SAAS;UAClBL,KAAK,EAAE,OAAO;UACd4B,CAAC,EAAE,GAAG;UACNN,OAAO,EAAE,MAAM;UACfO,cAAc,EAAE,eAAe;UAC/BC,UAAU,EAAE,QAAQ;UACpBL,SAAS,EAAE,2BAA2B;UACtCvB,QAAQ,EAAE;QACZ,CAAE;QAAAH,QAAA,gBAEFtF,OAAA,CAACnB,GAAG;UAAC2G,EAAE,EAAE;YAAEqB,OAAO,EAAE,MAAM;YAAEQ,UAAU,EAAE,QAAQ;YAAEC,EAAE,EAAE;UAAE,CAAE;UAAAhC,QAAA,gBACxDtF,OAAA;YACEiG,GAAG,EAAC,0EAA0E;YAC9EC,GAAG,EAAC,uBAAuB;YAC3BqB,KAAK,EAAE;cACLnB,MAAM,EAAE,MAAM;cACdoB,WAAW,EAAE;YACf;UAAE;YAAAlB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACFzG,OAAA,CAAChB,UAAU;YACTyI,OAAO,EAAC,IAAI;YACZzB,SAAS,EAAC,KAAK;YACfR,EAAE,EAAE;cACFkC,UAAU,EAAE,uBAAuB;cACnCC,UAAU,EAAE,GAAG;cACfC,QAAQ,EAAE,MAAM;cAChBC,aAAa,EAAE;YACjB,CAAE;YAAAvC,QAAA,EACH;UAED;YAAAgB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eACNzG,OAAA,CAACnB,GAAG;UAAC2G,EAAE,EAAE;YAAEsC,QAAQ,EAAE;UAAE;QAAE;UAAAxB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAE5BzG,OAAA,CAACnB,GAAG;UAAAyG,QAAA,gBACFtF,OAAA,CAACd,UAAU;YACTqG,KAAK,EAAC,SAAS;YACfwC,IAAI,EAAC,OAAO;YACZhC,OAAO,EAAEA,CAAA,KAAMxF,SAAS,CAAC,KAAK,CAAE;YAChCiF,EAAE,EAAE;cAAEwC,EAAE,EAAE;YAAI,CAAE;YAAA1C,QAAA,eAEhBtF,OAAA,CAACR,YAAY;cAAA8G,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eACbzG,OAAA,CAACd,UAAU;YACTqG,KAAK,EAAC,SAAS;YACfwC,IAAI,EAAC,OAAO;YACZhC,OAAO,EAAEA,CAAA,KAAM;cACbxF,SAAS,CAAC,KAAK,CAAC;cAChB8E,SAAS,CAAC,CAAC;YACb,CAAE;YAAAC,QAAA,eAEFtF,OAAA,CAACT,SAAS;cAAA+G,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAGLjG,mBAAmB,gBAClBR,OAAA,CAACnB,GAAG;QACF2G,EAAE,EAAE;UACF2B,CAAC,EAAE,CAAC;UACJP,QAAQ,EAAE,MAAM;UAChBkB,QAAQ,EAAE,CAAC;UACXG,UAAU,EAAE,8CAA8C;UAC1DxC,QAAQ,EAAE;QACZ,CAAE;QAAAH,QAAA,gBAEFtF,OAAA,CAAChB,UAAU;UACTyI,OAAO,EAAC,IAAI;UACZzB,SAAS,EAAC,KAAK;UACfkC,YAAY;UACZ1C,EAAE,EAAE;YACFkC,UAAU,EAAE,uBAAuB;YACnCC,UAAU,EAAE,GAAG;YACfpC,KAAK,EAAE,SAAS;YAChB4C,SAAS,EAAE,QAAQ;YACnBC,EAAE,EAAE;UACN,CAAE;UAAA9C,QAAA,EACH;QAED;UAAAgB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eAEbzG,OAAA,CAACnB,GAAG;UAAC2G,EAAE,EAAE;YAAEqB,OAAO,EAAE,MAAM;YAAEC,aAAa,EAAE,QAAQ;YAAEuB,GAAG,EAAE,GAAG;YAAEC,EAAE,EAAE;UAAE,CAAE;UAAAhD,QAAA,gBACrEtF,OAAA,CAACjB,KAAK;YACJ2H,SAAS,EAAE,CAAE;YACblB,EAAE,EAAE;cACF2B,CAAC,EAAE,GAAG;cACNoB,MAAM,EAAE,SAAS;cACjB5B,YAAY,EAAE;YAChB,CAAE;YACFZ,OAAO,EAAEA,CAAA,KAAM5B,gBAAgB,CAAC,SAAS,CAAE;YAAAmB,QAAA,eAE3CtF,OAAA,CAACnB,GAAG;cAAC2G,EAAE,EAAE;gBAAEqB,OAAO,EAAE,MAAM;gBAAEQ,UAAU,EAAE;cAAS,CAAE;cAAA/B,QAAA,gBACjDtF,OAAA,CAACP,UAAU;gBAAC+F,EAAE,EAAE;kBAAEwC,EAAE,EAAE,CAAC;kBAAEzC,KAAK,EAAE;gBAAU;cAAE;gBAAAe,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAC/CzG,OAAA,CAACnB,GAAG;gBAAAyG,QAAA,gBACFtF,OAAA,CAAChB,UAAU;kBAACyI,OAAO,EAAC,WAAW;kBAAAnC,QAAA,EAAC;gBAAO;kBAAAgB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACpDzG,OAAA,CAAChB,UAAU;kBAACyI,OAAO,EAAC,OAAO;kBAAClC,KAAK,EAAC,gBAAgB;kBAAAD,QAAA,EAAC;gBAEnD;kBAAAgB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACV,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eAERzG,OAAA,CAACjB,KAAK;YACJ2H,SAAS,EAAE,CAAE;YACblB,EAAE,EAAE;cACF2B,CAAC,EAAE,GAAG;cACNoB,MAAM,EAAE,SAAS;cACjB5B,YAAY,EAAE;YAChB,CAAE;YACFZ,OAAO,EAAEA,CAAA,KAAM5B,gBAAgB,CAAC,SAAS,CAAE;YAAAmB,QAAA,eAE3CtF,OAAA,CAACnB,GAAG;cAAC2G,EAAE,EAAE;gBAAEqB,OAAO,EAAE,MAAM;gBAAEQ,UAAU,EAAE;cAAS,CAAE;cAAA/B,QAAA,gBACjDtF,OAAA,CAACN,QAAQ;gBAAC8F,EAAE,EAAE;kBAAEwC,EAAE,EAAE,CAAC;kBAAEzC,KAAK,EAAE;gBAAU;cAAE;gBAAAe,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAC7CzG,OAAA,CAACnB,GAAG;gBAAAyG,QAAA,gBACFtF,OAAA,CAAChB,UAAU;kBAACyI,OAAO,EAAC,WAAW;kBAAAnC,QAAA,EAAC;gBAAO;kBAAAgB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACpDzG,OAAA,CAAChB,UAAU;kBAACyI,OAAO,EAAC,OAAO;kBAAClC,KAAK,EAAC,gBAAgB;kBAAAD,QAAA,EAAC;gBAEnD;kBAAAgB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACV,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eAERzG,OAAA,CAACjB,KAAK;YACJ2H,SAAS,EAAE,CAAE;YACblB,EAAE,EAAE;cACF2B,CAAC,EAAE,GAAG;cACNoB,MAAM,EAAE,SAAS;cACjB5B,YAAY,EAAE;YAChB,CAAE;YACFZ,OAAO,EAAEA,CAAA,KAAM5B,gBAAgB,CAAC,OAAO,CAAE;YAAAmB,QAAA,eAEzCtF,OAAA,CAACnB,GAAG;cAAC2G,EAAE,EAAE;gBAAEqB,OAAO,EAAE,MAAM;gBAAEQ,UAAU,EAAE;cAAS,CAAE;cAAA/B,QAAA,gBACjDtF,OAAA,CAACL,UAAU;gBAAC6F,EAAE,EAAE;kBAAEwC,EAAE,EAAE,CAAC;kBAAEzC,KAAK,EAAE;gBAAU;cAAE;gBAAAe,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAC/CzG,OAAA,CAACnB,GAAG;gBAAAyG,QAAA,gBACFtF,OAAA,CAAChB,UAAU;kBAACyI,OAAO,EAAC,WAAW;kBAAAnC,QAAA,EAAC;gBAAK;kBAAAgB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eAClDzG,OAAA,CAAChB,UAAU;kBAACyI,OAAO,EAAC,OAAO;kBAAClC,KAAK,EAAC,gBAAgB;kBAAAD,QAAA,EAAC;gBAEnD;kBAAAgB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACV,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAENzG,OAAA,CAAChB,UAAU;UACTyI,OAAO,EAAC,SAAS;UACjBjC,EAAE,EAAE;YACFqB,OAAO,EAAE,OAAO;YAChBsB,SAAS,EAAE,QAAQ;YACnBG,EAAE,EAAE,CAAC;YACL/C,KAAK,EAAE,iBAAiB;YACxBiD,SAAS,EAAE;UACb,CAAE;UAAAlD,QAAA,EACH;QAED;UAAAgB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACV,CAAC,gBAENzG,OAAA,CAAAE,SAAA;QAAAoF,QAAA,gBAEEtF,OAAA,CAACnB,GAAG;UAAC2G,EAAE,EAAE;YAAE2B,CAAC,EAAE,CAAC;YAAEP,QAAQ,EAAE,MAAM;YAAEkB,QAAQ,EAAE;UAAE,CAAE;UAAAxC,QAAA,GAC9CpE,eAAe,iBACdlB,OAAA,CAACnB,GAAG;YACF2G,EAAE,EAAE;cACF2B,CAAC,EAAE,CAAC;cACJiB,EAAE,EAAE,CAAC;cACLxC,OAAO,EAAE,SAAS;cAClBe,YAAY,EAAE,CAAC;cACf8B,MAAM,EAAE;YACV,CAAE;YAAAnD,QAAA,eAEFtF,OAAA,CAAChB,UAAU;cAACyI,OAAO,EAAC,OAAO;cAAClC,KAAK,EAAC,OAAO;cAAAD,QAAA,EACtCpE;YAAe;cAAAoF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACV,CACN,EAGA7F,QAAQ,CAACqC,GAAG,CAAEc,OAAO,iBACpB/D,OAAA,CAACnB,GAAG;YAEF2G,EAAE,EAAE;cACFqB,OAAO,EAAE,MAAM;cACfO,cAAc,EAAErD,OAAO,CAACP,MAAM,KAAK,MAAM,GAAG,UAAU,GAAG,YAAY;cACrE4E,EAAE,EAAE;YACN,CAAE;YAAA9C,QAAA,eAEFtF,OAAA,CAACjB,KAAK;cACJ2H,SAAS,EAAE,CAAE;cACblB,EAAE,EAAE;gBACF2B,CAAC,EAAE,GAAG;gBACNuB,QAAQ,EAAE,KAAK;gBACf/B,YAAY,EAAE5C,OAAO,CAACP,MAAM,KAAK,MAAM,GAAG,oBAAoB,GAAG,oBAAoB;gBACrFoC,OAAO,EAAE7B,OAAO,CAACP,MAAM,KAAK,MAAM,GAAG,SAAS,GAAG,SAAS;gBAC1D+B,KAAK,EAAExB,OAAO,CAACP,MAAM,KAAK,MAAM,GAAG,OAAO,GAAG;cAC/C,CAAE;cAAA8B,QAAA,gBAEFtF,OAAA,CAAChB,UAAU;gBAACyI,OAAO,EAAC,OAAO;gBAAAnC,QAAA,EACxBvB,OAAO,CAACR;cAAI;gBAAA+C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eACbzG,OAAA,CAAChB,UAAU;gBAACyI,OAAO,EAAC,SAAS;gBAAClC,KAAK,EAAExB,OAAO,CAACP,MAAM,KAAK,MAAM,GAAG,uBAAuB,GAAG,gBAAiB;gBAACgC,EAAE,EAAE;kBAAEqB,OAAO,EAAE,OAAO;kBAAEyB,EAAE,EAAE;gBAAI,CAAE;gBAAAhD,QAAA,EAC5IvB,OAAO,CAACN,SAAS,CAACkF,kBAAkB,CAAC,EAAE,EAAE;kBAAEC,IAAI,EAAE,SAAS;kBAAEC,MAAM,EAAE;gBAAU,CAAC;cAAC;gBAAAvC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACR;UAAC,GAvBH1C,OAAO,CAACZ,EAAE;YAAAmD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAwBZ,CACN,CAAC,EAGDrF,gBAAgB,iBACfpB,OAAA,CAACnB,GAAG;YAAC2G,EAAE,EAAE;cAAEsD,EAAE,EAAE,CAAC;cAAEJ,QAAQ,EAAE;YAAO,CAAE;YAAApD,QAAA,eACnCtF,OAAA,CAACJ,YAAY;cAACmJ,cAAc,EAAGC,IAAI,IAAK;gBACtC3H,mBAAmB,CAAC,KAAK,CAAC;gBAC1BV,QAAQ,CAAC,EAAE,CAAC;gBACZ,MAAMsI,OAAO,GAAGD,IAAI,CAACE,kBAAkB,CAAC,OAAO,EAAE;kBAC/CC,KAAK,EAAE,SAAS;kBAChBC,GAAG,EAAE,SAAS;kBACdC,IAAI,EAAE;gBACR,CAAC,CAAC;gBACF/E,iBAAiB,CAAC2E,OAAO,EAAE,IAAI,CAAC;cAClC;YAAE;cAAA3C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CACN,EAGAnF,gBAAgB,IAAIE,SAAS,CAACwB,MAAM,GAAG,CAAC,iBACvChD,OAAA,CAACnB,GAAG;YAAC2G,EAAE,EAAE;cAAEsD,EAAE,EAAE,CAAC;cAAEJ,QAAQ,EAAE;YAAO,CAAE;YAAApD,QAAA,eACnCtF,OAAA,CAACH,gBAAgB;cACf2B,SAAS,EAAEA,SAAU;cACrB8H,cAAc,EAAGC,QAAQ,IAAK;gBAC5BhI,mBAAmB,CAAC,KAAK,CAAC;gBAC1BZ,QAAQ,CAAC,EAAE,CAAC;gBACZ2D,iBAAiB,CAACiF,QAAQ,CAACC,KAAK,EAAE,IAAI,CAAC;cACzC;YAAE;cAAAlD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CACN,eAEDzG,OAAA;YAAKyJ,GAAG,EAAE7H;UAAc;YAAA0E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EAG1BzF,SAAS,iBACRhB,OAAA,CAACnB,GAAG;YACF2G,EAAE,EAAE;cACFqB,OAAO,EAAE,MAAM;cACfO,cAAc,EAAE,YAAY;cAC5BC,UAAU,EAAE,QAAQ;cACpBe,EAAE,EAAE,CAAC;cACLsB,EAAE,EAAE;YACN,CAAE;YAAApE,QAAA,eAEFtF,OAAA,CAACjB,KAAK;cACJ2H,SAAS,EAAE,CAAE;cACblB,EAAE,EAAE;gBACF2B,CAAC,EAAE,CAAC;gBACJuB,QAAQ,EAAE,KAAK;gBACf/B,YAAY,EAAE,oBAAoB;gBAClCf,OAAO,EAAE;cACX,CAAE;cAAAN,QAAA,eAEFtF,OAAA,CAACnB,GAAG;gBAAC2G,EAAE,EAAE;kBAAEqB,OAAO,EAAE,MAAM;kBAAEQ,UAAU,EAAE,QAAQ;kBAAEgB,GAAG,EAAE;gBAAE,CAAE;gBAAA/C,QAAA,gBACzDtF,OAAA,CAACZ,gBAAgB;kBAAC2I,IAAI,EAAE,EAAG;kBAACvC,EAAE,EAAE;oBAAED,KAAK,EAAE;kBAAU;gBAAE;kBAAAe,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACxDzG,OAAA,CAAChB,UAAU;kBACTyI,OAAO,EAAC,OAAO;kBACfjC,EAAE,EAAE;oBACFD,KAAK,EAAE;kBACT,CAAE;kBAAAD,QAAA,EACH;gBAED;kBAAAgB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACV;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,eAGNzG,OAAA,CAACnB,GAAG;UAAC2G,EAAE,EAAE;YAAE2B,CAAC,EAAE,CAAC;YAAEwC,SAAS,EAAE,CAAC;YAAEC,WAAW,EAAE;UAAU,CAAE;UAAAtE,QAAA,gBACtDtF,OAAA,CAACnB,GAAG;YAAC2G,EAAE,EAAE;cAAEqB,OAAO,EAAE,MAAM;cAAEuB,EAAE,EAAE;YAAE,CAAE;YAAA9C,QAAA,gBAClCtF,OAAA,CAACf,SAAS;cACR4K,SAAS;cACT9B,IAAI,EAAC,OAAO;cACZ+B,WAAW,EAAC,sBAAsB;cAClCC,KAAK,EAAErJ,KAAM;cACbsJ,QAAQ,EAAGhF,CAAC,IAAKrE,QAAQ,CAACqE,CAAC,CAACiF,MAAM,CAACF,KAAK,CAAE;cAC1CG,UAAU,EAAEnF,cAAe;cAC3B0C,OAAO,EAAC,UAAU;cAClBjC,EAAE,EAAE;gBAAEwC,EAAE,EAAE;cAAE;YAAE;cAAA1B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf,CAAC,eACFzG,OAAA,CAACd,UAAU;cACTqG,KAAK,EAAC,SAAS;cACfQ,OAAO,EAAEA,CAAA,KAAMzB,iBAAiB,CAAC,CAAE;cACnC6F,QAAQ,EAAE,CAACzJ,KAAK,CAACgE,IAAI,CAAC,CAAE;cACxBc,EAAE,EAAE;gBAAEI,OAAO,EAAE,SAAS;gBAAEL,KAAK,EAAE,OAAO;gBAAE,SAAS,EAAE;kBAAEK,OAAO,EAAE;gBAAU;cAAE,CAAE;cAAAN,QAAA,eAE9EtF,OAAA,CAACV,QAAQ;gBAAAgH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACF,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACV,CAAC,eACNzG,OAAA,CAACnB,GAAG;YAAC2G,EAAE,EAAE;cAAEqB,OAAO,EAAE,MAAM;cAAEuD,QAAQ,EAAE,MAAM;cAAE/B,GAAG,EAAE;YAAI,CAAE;YAAA/C,QAAA,gBACvDtF,OAAA,CAACb,IAAI;cACHqK,KAAK,EAAC,eAAe;cACrBzB,IAAI,EAAC,OAAO;cACZN,OAAO,EAAC,UAAU;cAClB1B,OAAO,EAAEA,CAAA,KAAMX,eAAe,CAAC,6BAA6B,CAAE;cAC9DiF,SAAS;YAAA;cAAA/D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC,eACFzG,OAAA,CAACb,IAAI;cACHqK,KAAK,EAAC,mBAAmB;cACzBzB,IAAI,EAAC,OAAO;cACZN,OAAO,EAAC,UAAU;cAClB1B,OAAO,EAAEA,CAAA,KAAMX,eAAe,CAAC,6BAA6B,CAAE;cAC9DiF,SAAS;YAAA;cAAA/D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC,eACFzG,OAAA,CAACb,IAAI;cACHqK,KAAK,EAAC,SAAS;cACfzB,IAAI,EAAC,OAAO;cACZN,OAAO,EAAC,UAAU;cAClB1B,OAAO,EAAEA,CAAA,KAAMX,eAAe,CAAC,6BAA6B,CAAE;cAC9DiF,SAAS;YAAA;cAAA/D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA,eACN,CACH;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CACR;EAAA,eACD,CAAC;AAEP,CAAC;AAACpG,EAAA,CAloBID,UAAoB;EAAA,QAaMN,OAAO;AAAA;AAAAwK,EAAA,GAbjClK,UAAoB;AAooB1B,eAAeA,UAAU;AAAC,IAAAkK,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}